(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[697],{1969:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(7876),r=s(4232),i=s(9099),o=s(4587),c=s.n(o),n=s(3920),A=s.n(n),l=s(9324),d=s.n(l);function u(e){if(e&&(e.startsWith("http://")||e.startsWith("https://")))return e;let{publicRuntimeConfig:t={}}=d()()||{},s=t.cdnUrl;return s?"".concat(s).concat(e):e}function m(){let{id:e}=(0,i.useRouter)().query,[t,s]=(0,r.useState)(0),[o,n]=(0,r.useState)("description"),[l,d]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null),[_,v]=(0,r.useState)(!1),[g,f]=(0,r.useState)([]),[C,p]=(0,r.useState)(1),[x,j]=(0,r.useState)(!1),[w,D]=(0,r.useState)(""),N=(0,r.useRef)(null),P=(0,r.useRef)(null),B=(0,r.useRef)(null),E=(0,r.useRef)(null),b=(0,r.useRef)(null),K=(0,r.useRef)(null),I=(0,r.useRef)(null),Q=async()=>{if(e){v(!0);try{let t=await fetch("/api/product/".concat(e)),s=await t.json();h(s)}catch(e){console.error("加载产品失败:",e),h(null)}finally{v(!1)}}},y=async()=>{if(!m||!m.reviewsFile)return void f([]);j(!0);try{let e=await fetch("/api/reviews/".concat(m.reviewsFile)),t=await e.json();f(t.reviews||[])}catch(e){console.error("加载评论失败:",e),f([])}finally{j(!1)}},L=async()=>{try{let e=await fetch("/configs/test.json"),t=await e.json();D(t)}catch(e){console.error("加载测试数据失败:",e)}};(0,r.useEffect)(()=>{e&&Q()},[e]),(0,r.useEffect)(()=>{m&&y()},[m]),(0,r.useEffect)(()=>{L()},[]);let S=Math.ceil(g.length/5),Y=(C-1)*5,T=g.slice(Y,Y+5),R=(e,t)=>{t&&t.target&&t.target.closest(".thumbnails")&&t.target.closest(".thumbnails").isDragging||s(e)},k=e=>{let t;switch(n(e),e){case"description":t=b;break;case"specs":t=K;break;case"reviews":t=I;break;default:return}if(t.current){let e=60*!!l,s=t.current.offsetTop-e;window.scrollTo({top:s,behavior:"smooth"})}};return((0,r.useEffect)(()=>{let e=setTimeout(()=>{B.current&&null===E.current&&(E.current=B.current.offsetTop)},100);return()=>clearTimeout(e)},[]),(0,r.useEffect)(()=>{let e=()=>{if(!B.current||null===E.current)return;let e=window.scrollY,t=e>=E.current;d(t);let s=e+60*!!t+50;I.current&&s>=I.current.offsetTop?n("reviews"):K.current&&s>=K.current.offsetTop?n("specs"):b.current&&s>=b.current.offsetTop&&n("description")};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,r.useEffect)(()=>{let e=N.current;if(!e||!m)return;let t=!1,s=0,a=0,r=r=>{t=!0,s=r.pageX-e.offsetLeft,a=e.scrollLeft,e.style.cursor="grabbing"},i=r=>{if(!t)return;r.preventDefault();let i=(r.pageX-e.offsetLeft-s)*2;e.scrollLeft=a-i},o=()=>{t=!1,e.style.cursor="grab"},c=r=>{t=!0,s=r.touches[0].pageX-e.offsetLeft,a=e.scrollLeft},n=r=>{if(!t)return;let i=(r.touches[0].pageX-e.offsetLeft-s)*2;e.scrollLeft=a-i},A=()=>{t=!1};return e.addEventListener("mousedown",r),e.addEventListener("mousemove",i),e.addEventListener("mouseup",o),e.addEventListener("mouseleave",o),e.addEventListener("touchstart",c),e.addEventListener("touchmove",n),e.addEventListener("touchend",A),e.style.cursor="grab",()=>{e.removeEventListener("mousedown",r),e.removeEventListener("mousemove",i),e.removeEventListener("mouseup",o),e.removeEventListener("mouseleave",o),e.removeEventListener("touchstart",c),e.removeEventListener("touchmove",n),e.removeEventListener("touchend",A)}},[m]),(0,r.useEffect)(()=>{let e=P.current;if(!e||!m||!m.scrollImgs)return;let a=0,r=0,i=!1,o=e=>{i=!0,a=e.clientX,r=e.clientY},c=e=>{i&&e.preventDefault()},n=e=>{if(!i)return;i=!1;let o=e.clientX,c=e.clientY,n=o-a;Math.abs(n)>Math.abs(c-r)&&Math.abs(n)>50&&(n>0?s(t>0?t-1:m.scrollImgs.length-1):s(t<m.scrollImgs.length-1?t+1:0))},A=e=>{i=!0,a=e.touches[0].clientX,r=e.touches[0].clientY},l=e=>{i&&Math.abs(e.touches[0].clientX-a)>Math.abs(e.touches[0].clientY-r)&&e.preventDefault()},d=e=>{if(!i)return;i=!1;let o=e.changedTouches[0].clientX,c=e.changedTouches[0].clientY,n=o-a;Math.abs(n)>Math.abs(c-r)&&Math.abs(n)>50&&(n>0?s(t>0?t-1:m.scrollImgs.length-1):s(t<m.scrollImgs.length-1?t+1:0))};return e.addEventListener("mousedown",o),e.addEventListener("mousemove",c),e.addEventListener("mouseup",n),e.addEventListener("mouseleave",n),e.addEventListener("touchstart",A,{passive:!1}),e.addEventListener("touchmove",l,{passive:!1}),e.addEventListener("touchend",d),()=>{e.removeEventListener("mousedown",o),e.removeEventListener("mousemove",c),e.removeEventListener("mouseup",n),e.removeEventListener("mouseleave",n),e.removeEventListener("touchstart",A),e.removeEventListener("touchmove",l),e.removeEventListener("touchend",d)}},[m,t]),_)?(0,a.jsx)("div",{className:A().loading,children:"产品加载中..."}):m?(0,a.jsxs)("div",{className:A().container,children:[(0,a.jsxs)("div",{className:A().imageSection,children:[(0,a.jsxs)("div",{className:A().mainImage,children:[(0,a.jsx)(c(),{ref:P,src:u(m.scrollImgs[t]),alt:m.name,width:600,height:600,className:A().productImage,draggable:!1,priority:0===t,placeholder:"blur",blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k="}),(0,a.jsxs)("div",{className:A().imageCounter,children:[t+1," / ",m.scrollImgs.length]})]}),(0,a.jsx)(c(),{src:u("/product/dsct.gif"),alt:"dsct Image",width:700,height:400,style:{width:"100%",height:"auto"},draggable:!1,className:A().dsctImage}),(0,a.jsx)("div",{className:A().thumbnails,ref:N,children:m.scrollImgs.map((e,s)=>(0,a.jsx)(c(),{src:u(e),alt:"".concat(m.name," ").concat(s+1),width:80,height:80,className:"".concat(A().thumbnail," ").concat(s===t?A().activeThumbnail:""),onClick:e=>R(s,e),draggable:!1,placeholder:"blur",blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k="},s))})]}),(0,a.jsxs)("div",{className:A().productInfo,children:[(0,a.jsxs)("div",{className:A().infoSection,children:[(0,a.jsxs)("div",{className:A().priceSection,children:[(0,a.jsxs)("span",{className:A().currentPrice,children:["$ ",m.currentPrice]}),(0,a.jsxs)("span",{className:A().originalPrice,children:["$ ",m.originalPrice]})]}),(0,a.jsxs)("div",{className:A().features,children:[(0,a.jsx)("div",{className:A().feature,children:(0,a.jsxs)("span",{children:[(0,a.jsx)("i",{className:"iconfont iconbaoyou",style:{color:"#ffffff"}}),"Free Shipping"]})}),(0,a.jsx)("div",{className:A().feature,children:(0,a.jsxs)("span",{children:[(0,a.jsx)("i",{className:"iconfont icontuihuowuyou",style:{color:"#ffffff"}}),"14 Days Free Returns"]})})]}),(0,a.jsx)("span",{className:A().saleTitle,children:m.saleTitle}),(0,a.jsx)("span",{className:A().promotionText,children:m.promotionText}),(0,a.jsxs)("span",{className:A().favouriteCount,children:[(0,a.jsx)("i",{className:"iconfont iconlike"}),m.favorites," Favourites"]})]}),(0,a.jsxs)("div",{className:A().promotionContainer,children:[(0,a.jsx)("h3",{children:"Promotion"}),(0,a.jsx)("div",{className:A().promotionList,children:m.promotions&&m.promotions.map((e,t)=>(0,a.jsx)("div",{className:A().promotionItem,children:e},t))})]}),(0,a.jsxs)("div",{className:A().guarantee,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("i",{className:"iconfont iconNEW_05-huodaofukuan",style:{color:"#ff4444"}}),"Guaranteed Safe Checkout."]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("i",{className:"iconfont icontuihuowuyou",style:{color:"#ff4444"}}),"14 Days Free Returns."]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("i",{className:"iconfont iconNEW_05-tuihuowudanyou",style:{color:"#ff4444"}}),"Quality Assurance."]})]})]}),(0,a.jsx)("div",{className:A().fixedBuyButton,children:(0,a.jsxs)("button",{className:A().buyNowBtn,children:[(0,a.jsx)("i",{className:"iconfont iconNEW_04-houwuc",style:{color:"#ffffff",marginRight:"10px"}}),"Buy Now"]})}),(0,a.jsxs)("div",{className:A().detailTabs,children:[(0,a.jsxs)("div",{className:"".concat(A().tabHeaders," ").concat(l?A().stickyHeaders:""),ref:B,children:[(0,a.jsx)("button",{className:"".concat(A().tabHeader," ").concat("description"===o?A().activeTab:""),onClick:()=>k("description"),children:"Description"}),(0,a.jsx)("button",{className:"".concat(A().tabHeader," ").concat("specs"===o?A().activeTab:""),onClick:()=>k("specs"),children:"Spec."}),(0,a.jsx)("button",{className:"".concat(A().tabHeader," ").concat("reviews"===o?A().activeTab:""),onClick:()=>k("reviews"),children:"Reviews"})]}),l&&(0,a.jsx)("div",{className:A().tabHeadersPlaceholder}),(0,a.jsxs)("div",{className:A().tabContent,children:[(0,a.jsx)("div",{className:A().descriptionContent,ref:b,id:"description",children:(0,a.jsx)("div",{className:A().detailImages,children:m.detailImages&&m.detailImages.map((e,t)=>(0,a.jsx)(c(),{src:u(e),alt:"detail_img ".concat(t+1),width:700,height:400,style:{width:"100%",height:"auto"},placeholder:"blur",blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k="},t))})}),(0,a.jsx)("div",{className:A().specsContent,ref:K,id:"specs",children:m.specifications&&(0,a.jsx)(c(),{src:u(m.specifications),alt:"spec_image",width:700,height:400,style:{width:"100%",height:"auto"},className:A().specsImage,placeholder:"blur",blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k="})}),(0,a.jsxs)("div",{className:A().reviewsContent,ref:I,id:"reviews",children:[(0,a.jsxs)("div",{className:A().reviewSummary,children:[(0,a.jsx)("span",{children:"Reviews"}),(0,a.jsxs)("span",{className:A().rating,children:[(0,a.jsx)("i",{className:"iconfont icon-StarFilled",style:{color:"#ffa500",fontSize:"16px"}})," ",m.rating," / 5"]})]}),x?(0,a.jsx)("div",{className:A().reviewsLoading,children:(0,a.jsx)("p",{children:"loading..."})}):0===g.length?(0,a.jsx)("div",{className:A().reviewsList,children:(0,a.jsx)("p",{children:"no reviews..."})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:A().reviewsList,children:T.map((e,t)=>(0,a.jsxs)("div",{className:A().reviewItem,children:[(0,a.jsxs)("div",{className:A().reviewHeader,children:[(0,a.jsxs)("div",{className:A().userInfo,children:[(0,a.jsx)(c(),{src:u(e.avatar_url),alt:"用户头像",width:40,height:40,className:A().userAvatar}),(0,a.jsx)("span",{className:A().userName,children:e.user_name})]}),(0,a.jsx)("div",{className:A().reviewMeta,children:(0,a.jsx)("div",{className:A().stars,children:[void 0,void 0,void 0,void 0,void 0].map((t,s)=>(0,a.jsx)("i",{className:"iconfont ".concat(s<Number(e.rating)?"icon-StarFilled":"icon-Star"," ").concat(s<Number(e.rating)?A().starFilled:A().starEmpty)},s))})})]}),(0,a.jsxs)("div",{className:A().reviewContent,children:[(0,a.jsx)("p",{children:e.review_text}),(0,a.jsx)("span",{className:A().reviewDate,children:e.review_date})]}),e.seller_reply&&(0,a.jsxs)("div",{className:A().sellerReply,children:[(0,a.jsx)("span",{className:A().replyLabel,children:"Seller Reply:"}),(0,a.jsx)("p",{children:e.seller_reply})]})]},Y+t))}),S>1&&(0,a.jsxs)("div",{className:A().pagination,children:[(0,a.jsx)("button",{className:A().pageBtn,onClick:()=>p(e=>Math.max(e-1,1)),disabled:1===C,children:"<"}),(()=>{let e=[];if(S<=5)for(let t=1;t<=S;t++)e.push(t);else C<=3?e.push(1,2,3,"...",S):C>=S-2?e.push(1,"...",S-2,S-1,S):e.push(1,"...",C-1,C,C+1,"...",S);return e})().map((e,t)=>(0,a.jsx)("button",{className:"".concat(A().pageBtn," ").concat(e===C?A().activePage:""," ").concat("..."===e?A().ellipsis:""),onClick:()=>"number"==typeof e&&p(e),disabled:"..."===e,children:e},t)),(0,a.jsx)("button",{className:A().pageBtn,onClick:()=>p(e=>Math.min(e+1,S)),disabled:C===S,children:">"})]})]})]})]})]}),(0,a.jsxs)("footer",{className:A().footer,children:[m.customer_service&&(0,a.jsxs)("div",{className:A().customerService,children:[(0,a.jsx)("div",{className:A().serviceIcon,children:(0,a.jsx)("i",{className:"iconfont iconkefu",style:{fontSize:"55px",color:"#007bff"}})}),(0,a.jsx)("div",{className:A().serviceInfo,children:m.customer_service.map((e,t)=>(0,a.jsx)("div",{className:A().serviceItem,children:e},t))})]}),(0,a.jsxs)("div",{className:A().footerLinks,children:[(0,a.jsx)("a",{href:"#",children:"ABOUT US"}),(0,a.jsx)("a",{href:"#",children:"PRIVACY POLICY "}),(0,a.jsx)("a",{href:"#",children:"RETURN POLICY "}),(0,a.jsx)("a",{href:"#",children:"SHIPPING POLICY"}),(0,a.jsx)("a",{href:"#",children:"TERMS&CONDITIONS "}),(0,a.jsx)("a",{href:"#",children:"CONTACT US"})]})]})]}):(0,a.jsx)("div",{className:A().error,children:"产品未找到或加载失败"})}},3920:e=>{e.exports={container:"ProductDetail_container__m1mbf",loading:"ProductDetail_loading__XL4hn",error:"ProductDetail_error__LTbhA",imageSection:"ProductDetail_imageSection__RpZEi",mainImage:"ProductDetail_mainImage__X4kYP",productImage:"ProductDetail_productImage__q7vtY",imageCounter:"ProductDetail_imageCounter__Zdayg",thumbnails:"ProductDetail_thumbnails__Rmdfz",thumbnail:"ProductDetail_thumbnail__a2aTI",activeThumbnail:"ProductDetail_activeThumbnail__bGvX2",dsctImage:"ProductDetail_dsctImage__RuzYF",productInfo:"ProductDetail_productInfo__V_lKm",infoSection:"ProductDetail_infoSection__LuAM5",saleTitle:"ProductDetail_saleTitle__j8qKG",promotionText:"ProductDetail_promotionText__yBrN2",favouriteCount:"ProductDetail_favouriteCount__X7T_2",iconfont:"ProductDetail_iconfont__qrvqS",priceSection:"ProductDetail_priceSection__bvwc8",currentPrice:"ProductDetail_currentPrice__WD4mD",originalPrice:"ProductDetail_originalPrice__7GPWg",features:"ProductDetail_features__LMoB1",feature:"ProductDetail_feature__XjZhG",promotionContainer:"ProductDetail_promotionContainer___B_vk",promotionList:"ProductDetail_promotionList__B3N0u",promotionItem:"ProductDetail_promotionItem__9TeOj",guarantee:"ProductDetail_guarantee__BH5cF",fixedBuyButton:"ProductDetail_fixedBuyButton__W8UrZ",buyNowBtn:"ProductDetail_buyNowBtn__k6QiX",detailTabs:"ProductDetail_detailTabs__vhNju",tabHeaders:"ProductDetail_tabHeaders__fT8R9",stickyHeaders:"ProductDetail_stickyHeaders__y_WHW",tabHeadersPlaceholder:"ProductDetail_tabHeadersPlaceholder__fMqSz",tabHeader:"ProductDetail_tabHeader__JdyPH",activeTab:"ProductDetail_activeTab__TQ_LP",tabContent:"ProductDetail_tabContent__Bc4Dh",descriptionContent:"ProductDetail_descriptionContent__sqCjl",detailImages:"ProductDetail_detailImages__T6TGg",specsContent:"ProductDetail_specsContent__e3ue7",specsImage:"ProductDetail_specsImage__WSWZb",reviewsContent:"ProductDetail_reviewsContent__BS74B",reviewSummary:"ProductDetail_reviewSummary__uTG_G",reviewsList:"ProductDetail_reviewsList__GKhxg",rating:"ProductDetail_rating__4PYTS",footer:"ProductDetail_footer__DCT2f",customerService:"ProductDetail_customerService__1Vn3Y",serviceIcon:"ProductDetail_serviceIcon__QNgVk",serviceInfo:"ProductDetail_serviceInfo__SEZT6",serviceItem:"ProductDetail_serviceItem__NRSX9",footerLinks:"ProductDetail_footerLinks__GTe9j",reviewsLoading:"ProductDetail_reviewsLoading__TfasN",reviewItem:"ProductDetail_reviewItem__eSwSk",reviewHeader:"ProductDetail_reviewHeader__y9WIb",userInfo:"ProductDetail_userInfo__wCNvW",userAvatar:"ProductDetail_userAvatar__ypN9v",userName:"ProductDetail_userName__4RN7A",reviewMeta:"ProductDetail_reviewMeta__u7jsQ",stars:"ProductDetail_stars__78oDo",starFilled:"ProductDetail_starFilled__DIzNm",starEmpty:"ProductDetail_starEmpty___JBUq",reviewDate:"ProductDetail_reviewDate__RTEEo",reviewContent:"ProductDetail_reviewContent__Pvoj0",sellerReply:"ProductDetail_sellerReply__wfH2s",replyLabel:"ProductDetail_replyLabel__xlIyr",pagination:"ProductDetail_pagination__6A8W9",pageBtn:"ProductDetail_pageBtn__MvVX6",activePage:"ProductDetail_activePage__sKkLt",ellipsis:"ProductDetail_ellipsis__021cv"}},7580:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/[id]",function(){return s(1969)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[782,636,593,792],()=>t(7580)),_N_E=e.O()}]);